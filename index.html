<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<title>–ú–∞—Å–ª–µ–Ω–∏—á–Ω–∞—è –≤–∏–∫—Ç–æ—Ä–∏–Ω–∞</title>

<style>
body {
    margin: 0;
    font-family: 'Trebuchet MS', sans-serif;
    background: radial-gradient(circle at top, #ffd27f, #ff8c42);
    text-align: center;
    transition: 1s;
    overflow-x: hidden;
}

.dark-mode {
    background: black;
    animation: redPulse 2s infinite alternate;
    color: white;
}

@keyframes redPulse {
    from { background-color: #000; }
    to { background-color: #3b0000; }
}

.glitch {
    font-size: 28px;
    color: red;
    animation: glitch 0.3s infinite;
}

@keyframes glitch {
    0% { transform: translate(2px,0); }
    25% { transform: translate(-2px,2px); }
    50% { transform: translate(2px,-2px); }
    75% { transform: translate(-2px,-2px); }
    100% { transform: translate(2px,0); }
}

h1 {
    background: linear-gradient(90deg, #ff512f, #f09819);
    margin: 0;
    padding: 25px;
    color: white;
    font-size: 40px;
}

.progress-container {
    width: 80%;
    max-width: 700px;
    height: 30px;
    background: #ffe0b3;
    margin: 25px auto;
    border-radius: 30px;
    overflow: hidden;
}

.progress-bar {
    height: 100%;
    width: 50%;
    background: linear-gradient(90deg, #ff0000, #ffcc00);
    transition: 0.4s;
}

#quiz-container {
    background: linear-gradient(145deg, #fff3e0, #ffe0b2);
    width: 80%;
    max-width: 700px;
    margin: 30px auto;
    padding: 25px;
    border-radius: 20px;
    transition: 1s;
}

.dark-mode #quiz-container {
    background: #1a0000;
}

#answers {
    display: flex;
    flex-direction: column;
    gap: 12px;
}

.answer-btn {
    padding: 12px;
    border: none;
    border-radius: 12px;
    font-size: 18px;
    cursor: pointer;
    background: linear-gradient(90deg, #ff9966, #ff5e62);
    color: white;
}

.skip {
    margin-top: 20px;
    padding: 12px;
    border-radius: 12px;
    border: none;
    cursor: pointer;
    background: linear-gradient(90deg, #222, #555);
    color: white;
}

.free-label {
    font-weight: bold;
    color: red;
    font-size: 18px;
    animation: pulse 1s infinite;
}

@keyframes pulse {
    0% { transform: scale(1); }
    50% { transform: scale(1.3); }
    100% { transform: scale(1); }
}

.small-text { font-size: 12px; }

.seal {
    position: fixed;
    top: -50px;
    font-size: 30px;
    animation: fall 5s linear forwards;
}

@keyframes fall {
    to { transform: translateY(110vh); }
}

.choice-screen {
    margin-top: 20px;
    padding: 20px;
    background: black;
    color: red;
    border-radius: 15px;
}

#result {
    font-size: 24px;
    padding: 20px;
    border-radius: 15px;
    margin: 20px auto;
    width: 80%;
    max-width: 700px;
    font-weight: bold; /* –î–æ–±–∞–≤–ª—è–µ–º –∂–∏—Ä–Ω—ã–π —à—Ä–∏—Ñ—Ç –¥–ª—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ */
}

.normal-result {
    background: linear-gradient(145deg, #fff3e0, #ffe0b2);
    color: #ff512f;
}

.dark-result {
    background: #1a0000;
    color: red;
    animation: glitch 0.3s infinite;
}

.pancake {
    color: gold;
    font-weight: bold;
}

#timerText, #scoreText {
    font-size: 20px;
    font-weight: bold;
    margin: 10px 0;
}

</style>
</head>

<body>

<h1>ü•û –ú–∞—Å–ª–µ–Ω–∏—á–Ω–∞—è –≤–∏–∫—Ç–æ—Ä–∏–Ω–∞ ü•û</h1>

<div class="progress-container">
    <div class="progress-bar" id="progressBar"></div>
</div>

<div id="scoreText">–ë–∞–ª–ª—ã: 0</div>
<div id="timerText">–í—Ä–µ–º—è: 0 —Å–µ–∫</div>

<div id="quiz-container">
    <h2 id="question"></h2>
    <div id="answers"></div>

    <button class="skip" id="skipBtn" onclick="skipQuestion()">
        <div class="free-label">–ë–ï–°–ü–õ–ê–¢–ù–û</div>
        <div class="small-text">–ø—Ä–æ–ø—É—Å—Ç–∏—Ç—å –≤–æ–ø—Ä–æ—Å</div>
    </button>
</div>

<div id="result"></div>

<script>
const normalQuestions = [
{question:"1. –ß—Ç–æ —Å–∏–º–≤–æ–ª–∏–∑–∏—Ä—É—é—Ç –±–ª–∏–Ω—ã –Ω–∞ –ú–∞—Å–ª–µ–Ω–∏—Ü—É?",answers:["–ó–æ–ª–æ—Ç—ã–µ –º–æ–Ω–µ—Ç—ã","–°–æ–ª–Ω—Ü–µ","–õ—É–Ω—É"],correct:1},
{question:"2. –ö–∞–∫ –Ω–∞–∑—ã–≤–∞–µ—Ç—Å—è –ø–µ—Ä–≤—ã–π –¥–µ–Ω—å –ú–∞—Å–ª–µ–Ω–∏—á–Ω–æ–π –Ω–µ–¥–µ–ª–∏?",answers:["–ó–∞–∏–≥—Ä—ã—à","–õ–∞–∫–æ–º–∫–∞","–í—Å—Ç—Ä–µ—á–∞"],correct:2},
{question:"3. –ö–∞–∫–æ–µ –±–ª—é–¥–æ, –ø–æ–º–∏–º–æ –±–ª–∏–Ω–æ–≤, —è–≤–ª—è–µ—Ç—Å—è —Ç—Ä–∞–¥–∏—Ü–∏–æ–Ω–Ω—ã–º –¥–ª—è –ú–∞—Å–ª–µ–Ω–∏—Ü—ã, –æ—Å–æ–±–µ–Ω–Ω–æ –≤ –ø—è—Ç–Ω–∏—Ü—É?",answers:["–ü–µ–ª—å–º–µ–Ω–∏","–í–∞—Ä–µ–Ω–∏–∫–∏ —Å —Ç–≤–æ—Ä–æ–≥–æ–º","–ö—É–ª–µ–±—è–∫–∞"],correct:1},
{question:"4. –ó–∞—á–µ–º —Å–∂–∏–≥–∞—é—Ç —á—É—á–µ–ª–æ –≤ –ø–æ—Å–ª–µ–¥–Ω–∏–π –¥–µ–Ω—å –ú–∞—Å–ª–µ–Ω–∏—Ü—ã?",answers:["–ß—Ç–æ–±—ã –æ—Ç–ø—É–≥–Ω—É—Ç—å –∑–ª—ã—Ö –¥—É—Ö–æ–≤","–ß—Ç–æ–±—ã –ø—Ä–æ–≤–æ–¥–∏—Ç—å –∑–∏–º—É –∏ –≤—Å—Ç—Ä–µ—Ç–∏—Ç—å –≤–µ—Å–Ω—É","–ß—Ç–æ–±—ã —Å–æ–±—Ä–∞—Ç—å –≤—Å–µ—Ö –∂–∏—Ç–µ–ª–µ–π –¥–µ—Ä–µ–≤–Ω–∏ —É –∫–æ—Å—Ç—Ä–∞"],correct:1},
{question:"5. –ö–∞–∫ –Ω–∞–∑—ã–≤–∞—é—Ç—Å—è –¥–Ω–∏ –ú–∞—Å–ª–µ–Ω–∏—Ü—ã, –∫–æ–≥–¥–∞ –∑—è—Ç—å (–º—É–∂ –¥–æ—á–µ—Ä–∏) –ø—Ä–∏—Ö–æ–¥–∏—Ç –∫ —Ç–µ—â–µ (–º–∞—Ç–µ—Ä–∏ –∂–µ–Ω—ã) –Ω–∞ –±–ª–∏–Ω—ã?",answers:["–¢–µ—â–∏–Ω—ã –≤–µ—á–µ—Ä–∫–∏","–ó–æ–ª–æ–≤–∫–∏–Ω—ã –ø–æ—Å–∏–¥–µ–ª–∫–∏","–¶–µ–ª–æ–≤–∞–ª—å–Ω–∏–∫"],correct:0},
{question:"6. –ß—Ç–æ, —Å–æ–≥–ª–∞—Å–Ω–æ –ø–æ–≥–æ–≤–æ—Ä–∫–µ, ¬´–Ω–µ –ª–µ–∑–µ—Ç –≤ –≤–æ—Ä–æ—Ç–∞¬ª –Ω–∞ –ú–∞—Å–ª–µ–Ω–∏—Ü—É?",answers:["–ö–æ–º","–ë–ª–∏–Ω","–ö–æ—Ç"],correct:2},
{question:"7. –í –∫–∞–∫–æ–π –¥–µ–Ω—å –ú–∞—Å–ª–µ–Ω–∏—Ü—ã –ø—Ä–æ—Ö–æ–¥–∏–ª–∏ –∫—É–ª–∞—á–Ω—ã–µ –±–æ–∏ –∏ –≤–∑—è—Ç–∏–µ —Å–Ω–µ–∂–Ω–æ–≥–æ –≥–æ—Ä–æ–¥–∫–∞?",answers:["–°—Ä–µ–¥–∞","–ü—è—Ç–Ω–∏—Ü–∞","–°—É–±–±–æ—Ç–∞"],correct:2},
{question:"8. –ö–∞–∫ –∑–∞–∫–∞–Ω—á–∏–≤–∞–µ—Ç—Å—è –∏–∑–≤–µ—Å—Ç–Ω–∞—è –ø–æ—Å–ª–æ–≤–∏—Ü–∞: ¬´–ü–µ—Ä–≤—ã–π –±–ª–∏–Ω ‚Äî ...¬ª?",answers:["–ö–æ–º–æ–º","–ú–∞—Å–ª–æ–º","–†–æ–¥–Ω—ã–º"],correct:0},
{question:"9. –ö–∞–∫ –Ω–∞–∑—ã–≤–∞–µ—Ç—Å—è –ø–æ—Å–ª–µ–¥–Ω–∏–π, —Å–∞–º—ã–π –≤–∞–∂–Ω—ã–π –¥–µ–Ω—å –ú–∞—Å–ª–µ–Ω–∏—Ü—ã?",answers:["–†–∞–∑–≥—É–ª—è–π","–ü—Ä–æ—â–µ–Ω–æ–µ –≤–æ—Å–∫—Ä–µ—Å–µ–Ω—å–µ","–ü—Ä–æ–≤–æ–¥—ã"],correct:1},
{question:"10. –ß—Ç–æ –∑–∞–ø—Ä–µ—â–µ–Ω–æ –µ—Å—Ç—å –ø—Ä–∞–≤–æ—Å–ª–∞–≤–Ω—ã–º –ª—é–¥—è–º –≤ –ú–∞—Å–ª–µ–Ω–∏—á–Ω—É—é –Ω–µ–¥–µ–ª—é (–°—ã—Ä–Ω—É—é —Å–µ–¥–º–∏—Ü—É)?",answers:["–†—ã–±—É","–ú—è—Å–æ","–°–ª–∞–¥–∫–æ–µ"],correct:1}
];

const ultimateQuestions = [
{
question:"1. –ö—Ç–æ —Ç–∞–∫–æ–π –¢—é–ª–µ–Ω—á–∏–∫?",
answers:["–º–∞—Å–∫–æ—Ç –≥—Ä—É–ø–ø—ã","–ú–∞—Ä–∫ –ë–∞—Ä—Ç–æ–ª–æ–º–µ–µ–≤","–û–±–∞ –≤–µ—Ä–Ω—ã"],
correct:2
},
{
question:"2. –ö–∞–∫–æ–µ —Å–æ–±—ã—Ç–∏–µ –±—ã–ª–æ —Ö—É–¥—à–∏–º?",
answers:["–ß—É–¥–Ω–æ–π –ö—É–ø–∏–¥–æ–Ω","–ü—Ä—è—Ç–∫–∏ –í –≥–æ—Ä–æ–¥–µ","–¢–∞–π–Ω—ã–π –°–∞–Ω—Ç–∞"],
correct:1
},
{
question:"3. –ö—Ç–æ –æ—Ç–µ—Ü –¢—é–ª–µ–Ω—á–∏–∫–∞?",
answers:["–¢—é–ª–µ–Ω—å","‡±Æ‡∏Ñ’ê*#’Ü‡´¶…±‡∏Ñ’ê‡©Æ","–î–∞ —è –æ—Ç–∫—É–¥–∞ –∑–Ω–∞—é"],
correct:1
}
];

let questions = normalQuestions;
let current = 0;
let score = 0;
let correctCount = 0;
let darkPhase = false;
let startTime = Date.now();
let timerInterval;

function updateBar(){
    document.getElementById("progressBar").style.width = (50 + score*2) + "%";
    document.getElementById("scoreText").innerText = "–ë–∞–ª–ª—ã: " + score;
}

function updateTimer() {
    let timeSpent = Math.floor((Date.now() - startTime) / 1000);
    document.getElementById("timerText").innerText = "–í—Ä–µ–º—è: " + timeSpent + " —Å–µ–∫";
}

function loadQuestion(){
    if(current >= questions.length){
        if(!darkPhase){
            document.getElementById("quiz-container").innerHTML =
            `<div class="choice-screen glitch">
            –ú–∞—Å–ª–µ–Ω–∏—Ü–∞ –∑–∞–∫–æ–Ω—á–∏–ª–∞—Å—å. –•–æ—á–µ—à—å –ø—Ä–æ–¥–æ–ª–∂–∏—Ç—å?<br>
            <span class="small-text">–¶–µ–Ω–∞ –±—É–¥–µ—Ç –í–µ–ª–∏–∫–∞</span><br><br>
            <button onclick="startDark()">–î–ê</button>
            <button onclick="endGame()">–ù–ï–¢</button>
            </div>`;
        } else {
            endGame();
        }
        return;
    }

    let q = questions[current];
    document.getElementById("question").innerText = q.question;
    let answersDiv = document.getElementById("answers");
    answersDiv.innerHTML = "";

    q.answers.forEach((a,i)=>{
        let btn = document.createElement("button");
        btn.innerText = a;
        btn.className = "answer-btn";
        btn.onclick = ()=>checkAnswer(i);
        answersDiv.appendChild(btn);
    });
}

function checkAnswer(i){
    if(!darkPhase){
        score += 1;
        if(i === questions[current].correct){ score += 2; correctCount++; }
    } else {
        score += 3;
        if(i === questions[current].correct){ score += 10; correctCount++; }
    }
    current++;
    updateBar();
    loadQuestion();
}

function skipQuestion(){
    score -= 10;
    current++;
    updateBar();
    loadQuestion();
}

function startDark(){
    darkPhase = true;
    questions = ultimateQuestions;
    current = 0;
    document.body.classList.add("dark-mode");

    // –í–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—É—é —Å—Ç—Ä—É–∫—Ç—É—Ä—É quiz-container
    document.getElementById("quiz-container").innerHTML = `
        <h2 id="question"></h2>
        <div id="answers"></div>
        <button class="skip" id="skipBtn" onclick="skipQuestion()">
            <div class="free-label">–ë–ï–°–ü–õ–ê–¢–ù–û</div>
            <div class="small-text">–ø—Ä–æ–ø—É—Å—Ç–∏—Ç—å –≤–æ–ø—Ä–æ—Å</div>
        </button>
    `;

    // –°–∫—Ä—ã—Ç—å –∫–Ω–æ–ø–∫—É –ø—Ä–æ–ø—É—Å–∫–∞
    document.getElementById("skipBtn").style.display = "none";

    // –ó–∞–≥—Ä—É–∑–∏—Ç—å –≤–æ–ø—Ä–æ—Å
    loadQuestion();
    spawnSeals();
}

function spawnSeals(){
    setInterval(()=>{
        let seal = document.createElement("div");
        seal.className = "seal";
        seal.style.left = Math.random()*100 + "vw";
        seal.innerText = "ü¶≠";
        document.body.appendChild(seal);
        setTimeout(()=>seal.remove(),5000);
    },400);
}

function calculatePancakes() {
    let timeSpent = Math.floor((Date.now() - startTime) / 1000);
    let timePancakes = 0;
    if (timeSpent <= 10) {
        timePancakes = 100;
    } else if (timeSpent <= 30) {
        timePancakes = 15;
    } else {
        timePancakes = 15 - Math.floor((timeSpent - 30) / 10);
        if (timePancakes < 0) timePancakes = 0;
    }

    const maxScore = 69; // 10*3 + 3*13 = 30 + 39
    let scorePancakes = 10 - Math.floor((maxScore - score) / 5);
    if (scorePancakes < 0) scorePancakes = 0;

    let correctPancakes = 0;
    if (correctCount === 13) {
        correctPancakes = 10;
    } else if (correctCount >= 10 && correctCount <= 12) {
        correctPancakes = 9;
    } else if (correctCount >= 8 && correctCount <= 9) {
        correctPancakes = 8;
    } else if (correctCount >= 6 && correctCount <= 7) {
        correctPancakes = 7;
    } else if (correctCount >= 4 && correctCount <= 5) {
        correctPancakes = 6;
    } else if (correctCount >= 1 && correctCount <= 3) {
        correctPancakes = 3;
    }

    return { timeSpent, timePancakes, scorePancakes, correctPancakes };
}

function endGame(){
    clearInterval(timerInterval);
    document.getElementById("quiz-container").style.display="none";
    const stats = calculatePancakes();
    const resultDiv = document.getElementById("result");
    let resultClass = darkPhase ? "dark-result glitch" : "normal-result";
    resultDiv.className = resultClass;

    resultDiv.innerHTML = `
        <div style="font-size: 32px; font-weight: bold; color: ${darkPhase ? 'red' : 'green'}; animation: pulse 1s infinite;">üèÅ –ò—Ç–æ–≥ –≤–∏–∫—Ç–æ—Ä–∏–Ω—ã! üèÅ</div><br>
        <span style="color: blue; font-weight: bold;">–í—Ä–µ–º—è: ${stats.timeSpent} —Å–µ–∫—É–Ω–¥</span> <span class="pancake">(+${stats.timePancakes} –±–ª–∏–Ω—á–∏–∫–æ–≤ ü•û)</span><br>
        <span style="color: purple; font-weight: bold;">–ë–∞–ª–ª—ã: ${score}</span> <span class="pancake">(+${stats.scorePancakes} –±–ª–∏–Ω—á–∏–∫–æ–≤ ü•û)</span><br>
        <span style="color: green; font-weight: bold;">–ü—Ä–∞–≤–∏–ª—å–Ω—ã—Ö –æ—Ç–≤–µ—Ç–æ–≤: ${correctCount}</span> <span class="pancake">(+${stats.correctPancakes} –±–ª–∏–Ω—á–∏–∫–æ–≤ ü•û)</span><br>
        <br><span style="font-size: 28px; font-weight: bold; color: gold;">–í—Å–µ–≥–æ –±–ª–∏–Ω—á–∏–∫–æ–≤: ${stats.timePancakes + stats.scorePancakes + stats.correctPancakes} ü•ûü•ûü•û</span>
    `;
}

loadQuestion();
updateBar();
timerInterval = setInterval(updateTimer, 1000);
updateTimer(); // Initial update
</script>

</body>
</html>
